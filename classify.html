<!DOCTYPE html>
<html lang="en">
<head>
    <title>Classify</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="stylesheet" href="userpages.css">
    <script></script>
</head>
<body>
<h1>
    Please enter the next item
</h1>
Debug pages:
<ul style="color: white; font-size: 11px">
    <li><a href="high-confidence.html">High confidence</a></li>
    <li><a href="low-confidence.html">Low confidence</a></li>
    <li><a href="trash.html">Trash</a></li>
</ul>
<script>
    let pyshell = require('python-shell')

    var PiCamera = require('pi-camera')
    const Console = require("console");
    var myCamera = new PiCamera({
        mode: 'photo',
        output: `test.jpg`,
        width: 640,
        height: 480,
        nopreview: true,
        timeout: 1,
    })

    function takePhoto() {
        myCamera.snap()
            .then((result) => {
                console.log("took picture")
                let options = {
                    args: ['test.jpg']
                }
                pyshell.PythonShell.run('gcp_handler.py', options, function (err, results) {
                    if (err) throw err;
                    // results is an array consisting of messages collected during execution
                    console.log('results', results);
                    const obj = JSON.parse(results)
                    console.log(obj.confidence)
                });
            })
            .catch((error) => {
                // Handle your error
                console.log(error)
            });
    }
</script>
<div class="button-grid">
    <button class="start_btn" onclick=takePhoto() style="font-size: 52px; width: 40%">Take Picture</button>
    <button class="start_btn" onclick="location.href = 'qr.html'" style="font-size: 52px; width: 40%">I'm finished recycling</button>
</div>
</body>
</html>